<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HiGlass</title>
  <link rel="stylesheet" href="hglib.css" />

  <style type="text/css">
    #demo {
      position: absolute;
      left: 1rem;
      top: 1rem;
      bottom: 1rem;
      right: 1rem;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="demo"></div>
</body>
<script src="hglib.js"></script>
<script>
  const viewConfig = {
    editable: true,
    zoomFixed: false,
    trackSourceServers: [
      '//higlass.io/api/v1',
      'https://resgen.io/api/v1/gt/paper-data',
    ],
    exportViewUrl: '/api/v1/viewconfs',
    views: [
      {
        uid: 'aa',
        initialXDomain: [-2.9802322387695312e-8, 3099999999.9999995],
        autocompleteSource: '/api/v1/suggest/?d=OHJakQICQD6gTD7skx4EWA&',
        genomePositionSearchBox: {
          autocompleteServer: '//higlass.io/api/v1',
          autocompleteId: 'OHJakQICQD6gTD7skx4EWA',
          chromInfoServer: '//higlass.io/api/v1',
          chromInfoId: 'hg19',
          visible: true,
        },
        chromInfoPath: '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',
        tracks: {
          top: [
            {
              type: 'horizontal-gene-annotations',
              height: 60,
              tilesetUid: 'OHJakQICQD6gTD7skx4EWA',
              server: '//higlass.io/api/v1',
              uid: 'OHJakQICQD6gTD7skx4EWA',
              options: {
                name: 'Gene Annotations (hg19)',
                fontSize: 10,
                labelColor: 'black',
                labelBackgroundColor: '#ffffff',
                labelPosition: 'hidden',
                labelLeftMargin: 0,
                labelRightMargin: 0,
                labelTopMargin: 0,
                labelBottomMargin: 0,
                minHeight: 24,
                plusStrandColor: 'blue',
                minusStrandColor: 'red',
                trackBorderWidth: 0,
                trackBorderColor: 'black',
                showMousePosition: false,
                mousePositionColor: '#000000',
                geneAnnotationHeight: 16,
                geneLabelPosition: 'outside',
                geneStrandSpacing: 4,
              },
            },
            {
              chromInfoPath:
                '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',
              type: 'horizontal-chromosome-labels',
              height: 30,
              uid: 'X4e_1DKiQHmyghDa6lLMVA',
              options: {
                color: '#808080',
                stroke: '#ffffff',
                fontSize: 12,
                fontIsLeftAligned: false,
                showMousePosition: false,
                mousePositionColor: '#000000',
                reverseOrientation: false,
              },
            },
          ],
          left: [
            {
              type: 'vertical-gene-annotations',
              width: 60,
              tilesetUid: 'OHJakQICQD6gTD7skx4EWA',
              server: '//higlass.io/api/v1',
              options: {
                labelPosition: 'bottomRight',
                name: 'Gene Annotations (hg19)',
                fontSize: 10,
                labelColor: 'black',
                labelBackgroundColor: '#ffffff',
                labelLeftMargin: 0,
                labelRightMargin: 0,
                labelTopMargin: 0,
                labelBottomMargin: 0,
                minHeight: 24,
                plusStrandColor: 'blue',
                minusStrandColor: 'red',
                trackBorderWidth: 0,
                trackBorderColor: 'black',
                showMousePosition: false,
                mousePositionColor: '#000000',
                geneAnnotationHeight: 16,
                geneLabelPosition: 'outside',
                geneStrandSpacing: 4,
              },
              uid: 'dqBTMH78Rn6DeSyDBoAEXw',
            },
            {
              chromInfoPath:
                '//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv',
              type: 'vertical-chromosome-labels',
              width: 30,
              uid: 'RHdQK4IRQ7yJeDmKWb7Pcg',
              options: {
                color: '#808080',
                stroke: '#ffffff',
                fontSize: 12,
                fontIsLeftAligned: false,
                showMousePosition: false,
                mousePositionColor: '#000000',
                reverseOrientation: false,
              },
            },
          ],
          center: [
            {
              uid: 'c1',
              type: 'combined',
              height: 200,
              contents: [
                {
                  server: '//higlass.io/api/v1',
                  tilesetUid: 'CQMd6V_cRw6iCI_-Unl3PQ',
                  type: 'heatmap',
                  options: {
                    maxZoom: null,
                    labelPosition: 'bottomRight',
                    name: 'Rao et al. (2014) GM12878 MboI (allreps) 1kb',
                    backgroundColor: '#eeeeee',
                    labelLeftMargin: 0,
                    labelRightMargin: 0,
                    labelTopMargin: 0,
                    labelBottomMargin: 0,
                    labelShowResolution: true,
                    labelShowAssembly: true,
                    colorRange: [
                      'white',
                      'rgba(245,166,35,1.0)',
                      'rgba(208,2,27,1.0)',
                      'black',
                    ],
                    colorbarBackgroundColor: '#ffffff',
                    minWidth: 100,
                    minHeight: 100,
                    colorbarPosition: 'topRight',
                    trackBorderWidth: 0,
                    trackBorderColor: 'black',
                    heatmapValueScaling: 'log',
                    showMousePosition: false,
                    mousePositionColor: '#000000',
                    showTooltip: false,
                    extent: 'full',
                    zeroValueColor: null,
                    scaleStartPercent: '0.00000',
                    scaleEndPercent: '1.00000',
                  },
                  uid: 'GjuZed1ySGW1IzZZqFB9BA',
                  transforms: [
                    {
                      name: 'ICE',
                      value: 'weight',
                    },
                  ],
                },
              ],
              options: {},
            },
          ],
          right: [],
          bottom: [],
          whole: [],
          gallery: [],
        },
        layout: {
          w: 12,
          h: 12,
          x: 0,
          y: 0,
          moved: false,
          static: false,
        },
        initialYDomain: [816857610.4746318, 2283142389.525368],
      },
    ],
    zoomLocks: {
      locksByViewUid: {},
      locksDict: {},
    },
    locationLocks: {
      locksByViewUid: {},
      locksDict: {},
    },
    valueScaleLocks: {
      locksByViewUid: {},
      locksDict: {},
    },
  };

  // setTimeout(function () {
  //   // Go to PTEN
  //   window.hgApi.goTo(
  //     testViewConfig.views[0].uid,
  //     'chr10',
  //     89596071,
  //     89758810,
  //     'chr10',
  //     89596071,
  //     89758810,
  //     true,
  //     10000
  //   );
  // }, 3000);

  // setTimeout(function () {
  //   // Go to Chr1 without animation
  //   window.hgApi.goTo(
  //     testViewConfig.views[0].uid,
  //     'chr1',
  //     0,
  //     89758810,
  //     'chr1',
  //     0,
  //     89758810
  //   );
  // }, 11000);

  const hgApi = hglib.viewer(document.getElementById('demo'), viewConfig, {
    bounded: true,
  });
</script>
<script>
  (function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    (i[r] =
      i[r] ||
      function() {
        (i[r].q = i[r].q || []).push(arguments);
      }),
      (i[r].l = 1 * new Date());
    (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(
    window,
    document,
    'script',
    'https://www.google-analytics.com/analytics.js',
    'ga',
  );
  // =======
  // const hgApi = hglib.viewer(
  //   document.getElementById('demo'),
  //   viewConfig,
  //   { bounded: true },
  // );
  // >>>>>>> develop

  // hgApi.setBroadcastMousePositionGlobally(true);

  // hgApi.on('viewConfig', () => {
  //   console.log('View Config changed');
  // });
</script>
